{% extends "base.html" %}
{% block content %}

<h2 class="text-2xl font-bold mb-8 text-gray-800">ğŸ› ï¸ ìƒì„¸ ì¡°ê±´ìœ¼ë¡œ ë…¸íŠ¸ë¶ ê²€ìƒ‰í•˜ê¸°</h2>

<form method="post" action="/search/advanced"
      class="bg-white rounded-xl shadow-md p-8 space-y-8 text-sm">

  <!-- ìŠ¬ë¼ì´ë” ê·¸ë£¹ -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

    <!-- ì˜ˆì‚° -->
    <div>
      <label class="block text-gray-700 font-semibold mb-2">ğŸ’° ì˜ˆì‚° ë²”ìœ„ (ì›)</label>
      <div id="budget_range"></div>
      <input type="hidden" name="budget_range_min">
      <input type="hidden" name="budget_range_max">
      <div class="mt-1 text-gray-600">ì„ íƒ: <span id="budget_display" class="font-medium text-blue-700"></span></div>
    </div>

    <!-- CPU ì ìˆ˜ -->
    <div>
      <label class="block text-gray-700 font-semibold mb-2">ğŸ§  CPU PassMark ì ìˆ˜</label>
      <div id="cpu_range"></div>
      <input type="hidden" name="cpu_range_min">
      <input type="hidden" name="cpu_range_max">
      <div class="mt-1 text-gray-600">ì„ íƒ: <span id="cpu_display" class="font-medium text-blue-700"></span></div>
    </div>

    <!-- GPU ì ìˆ˜ -->
    <div>
      <label class="block text-gray-700 font-semibold mb-2">ğŸ® GPU 3DMark ì ìˆ˜</label>
      <div id="gpu_range"></div>
      <input type="hidden" name="gpu_range_min">
      <input type="hidden" name="gpu_range_max">
      <div class="mt-1 text-gray-600">ì„ íƒ: <span id="gpu_display" class="font-medium text-blue-700"></span></div>
    </div>

    <!-- ë””ìŠ¤í”Œë ˆì´ í¬ê¸° -->
    <div>
      <label class="block text-gray-700 font-semibold mb-2">ğŸ–¥ï¸ ë””ìŠ¤í”Œë ˆì´ í¬ê¸° (ì¸ì¹˜)</label>
      <div id="display_range"></div>
      <input type="hidden" name="display_range_min">
      <input type="hidden" name="display_range_max">
      <div class="mt-1 text-gray-600">ì„ íƒ: <span id="display_display" class="font-medium text-blue-700"></span></div>
    </div>
  </div>

  <!-- RAM -->
  <div>
    <label class="block font-semibold text-gray-700 mb-2">ğŸ’¾ RAM ìš©ëŸ‰</label>
    <div class="flex flex-wrap gap-3">
      {% for ram in [8, 16, 32, 64] %}
        <label class="flex items-center gap-1 text-gray-700">
          <input type="checkbox" name="ram" value="{{ ram }}"> {{ ram }}GB
        </label>
      {% endfor %}
    </div>
  </div>

  <!-- ì €ì¥ì¥ì¹˜ -->
  <div>
    <label class="block font-semibold text-gray-700 mb-2">ğŸ’½ ì €ì¥ì¥ì¹˜ ìš©ëŸ‰</label>
    <div class="flex flex-wrap gap-3">
      {% for sto in [256, 512, 1024, 2048] %}
        <label class="flex items-center gap-1 text-gray-700">
          <input type="checkbox" name="storage" value="{{ sto }}"> {{ sto }}GB
        </label>
      {% endfor %}
    </div>
  </div>

  <!-- í•´ìƒë„ -->
  <div>
    <label class="block font-semibold text-gray-700 mb-2">ğŸ“ í•´ìƒë„</label>
    <div class="flex gap-4">
      {% for res in ['FHDê¸‰', 'QHDê¸‰', 'UHDê¸‰'] %}
        <label class="flex items-center gap-1 text-gray-700">
          <input type="checkbox" name="resolution" value="{{ res }}"> {{ res }}
        </label>
      {% endfor %}
    </div>
  </div>

  <!-- í¸ì˜ê¸°ëŠ¥ -->
  <div>
    <label class="block font-semibold text-gray-700 mb-2">ğŸ”Œ í¸ì˜ ê¸°ëŠ¥</label>
    <div class="grid grid-cols-2 gap-3 text-gray-700">
      <label><input type="checkbox" name="port_hdmi"> HDMI í¬íŠ¸</label>
      <label><input type="checkbox" name="port_sd"> SDì¹´ë“œ ìŠ¬ë¡¯</label>
      <label><input type="checkbox" name="port_lan"> LAN í¬íŠ¸</label>
      <label><input type="checkbox" name="pd_charge"> PD ì¶©ì „</label>
      <label><input type="checkbox" name="thunderbolt"> ì¬ë”ë³¼íŠ¸</label>
    </div>
  </div>

  <!-- ë²„íŠ¼ -->
  <div class="pt-4">
    <button type="submit"
            class="w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded-lg shadow transition">
      ğŸ” ì¡°ê±´ì— ë§ëŠ” ë…¸íŠ¸ë¶ ë³´ê¸°
    </button>
  </div>
</form>

<!-- ìŠ¬ë¼ì´ë” ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
<link href="https://cdn.jsdelivr.net/npm/nouislider@15.6.0/dist/nouislider.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/nouislider@15.6.0/dist/nouislider.min.js"></script>

<!-- ìŠ¬ë¼ì´ë” ì´ˆê¸°í™” -->
<script>
function makeSlider(id, min, max, step, unit, defaultMin, defaultMax) {
  const slider = document.getElementById(id);
  const display = document.getElementById(id.replace('range', 'display'));
  const inputMin = document.querySelector(`input[name='${id}_min']`);
  const inputMax = document.querySelector(`input[name='${id}_max']`);

  noUiSlider.create(slider, {
    start: [defaultMin, defaultMax],
    connect: true,
    step: step,
    range: { min: min, max: max },
    tooltips: [true, true],
    format: {
      to: value => Math.round(value),
      from: value => Number(value)
    }
  });

  slider.noUiSlider.on('update', function (values) {
    inputMin.value = values[0];
    inputMax.value = values[1];
    display.textContent = `${values[0]}${unit} ~ ${values[1]}${unit}`;
  });
}

makeSlider('budget_range', 300000, 2000000, 50000, 'ì›', 500000, 1500000);
makeSlider('cpu_range', 2000, 50000, 1000, '', 8000, 20000);
makeSlider('gpu_range', 1000, 40000, 1000, '', 6000, 16000);
makeSlider('display_range', 11, 17, 0.1, 'ì¸ì¹˜', 13.3, 16);
</script>

{% endblock %}
