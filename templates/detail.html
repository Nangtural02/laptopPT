{% extends "base.html" %}
{% block content %}

<h2 class="text-2xl font-bold mb-8 text-gray-800">ğŸ’» ë…¸íŠ¸ë¶ ìƒì„¸ ì •ë³´</h2>

<div class="bg-white rounded-xl shadow p-8 space-y-10 text-sm text-gray-800">

  <!-- ê¸°ë³¸ ìŠ¤í™ -->
  <section>
    <h3 class="text-xl font-semibold mb-4 text-blue-700">{{ notebook.model_name or 'ëª¨ë¸ëª… ë¯¸ìƒ' }}</h3>

    <ul class="space-y-2">
      <li><span class="font-semibold">ğŸ§  CPU:</span> {{ notebook.cpu_obj.cpu_model_name }} <span class="text-gray-500">(ì‹±ê¸€: {{ notebook.cpu_obj.single_thread_benchmark }}ì  / ë©€í‹°: {{ notebook.cpu_obj.multi_thread_benchmark }}ì )</span></li>
      <li><span class="font-semibold">ğŸ® GPU:</span> {{ notebook.gpu_obj.gpu_model_name }} <span class="text-gray-500">({{ notebook.gpu_obj.graphics_benchmark }}ì )</span></li>
      <li><span class="font-semibold">ğŸ’¾ RAM:</span>
        <ul class="ml-6 list-disc">
          {% for mem in notebook.memories %}
            <li>{{ mem.capacity }} GB / {{ mem.bandwidth }} MHz</li>
          {% endfor %}
        </ul>
      </li>
      <li><span class="font-semibold">ğŸ’½ ì €ì¥ì¥ì¹˜:</span>
        <ul class="ml-6 list-disc">
          {% for sto in notebook.storages %}
            <li>{{ sto.capacity }} GB / {{ sto.type }}</li>
          {% endfor %}
        </ul>
      </li>
      <li><span class="font-semibold">ğŸ–¥ï¸ ë””ìŠ¤í”Œë ˆì´:</span> {{ notebook.display_obj.size_inch }}" / {{ notebook.display_obj.resolution }} / {{ notebook.display_obj.refresh_rate }}Hz</li>
      <li><span class="font-semibold">âš–ï¸ ë¬´ê²Œ:</span> {{ notebook.weight }} kg</li>
      <li><span class="font-semibold">ğŸ”‹ ë°°í„°ë¦¬ ìš©ëŸ‰:</span> {{ notebook.battery }} Wh</li>
      <li><span class="font-semibold">âš¡ ì†Œë¹„ ì „ë ¥:</span> {{ notebook.power_consumption }} W</li>
      <li><span class="font-semibold">âœ¨ í¸ì˜ ê¸°ëŠ¥:</span>
        <ul class="ml-6 list-disc">
          {% if notebook.convenience_obj.hdmi %}<li>HDMI</li>{% endif %}
          {% if notebook.convenience_obj.sd_port %}<li>SDì¹´ë“œ ìŠ¬ë¡¯</li>{% endif %}
          {% if notebook.convenience_obj.lan_port %}<li>LAN í¬íŠ¸</li>{% endif %}
          {% if notebook.convenience_obj.pd_charge %}<li>PD ì¶©ì „</li>{% endif %}
          {% if notebook.convenience_obj.thunderbolt %}<li>ì¬ë”ë³¼íŠ¸</li>{% endif %}
        </ul>
      </li>
    </ul>
  </section>

  <!-- íŒë§¤ì²˜ ë§í¬ -->
  <section>
    <h4 class="text-lg font-semibold mb-2">ğŸ›ï¸ í˜„ì¬ íŒë§¤ ì •ë³´</h4>
    <ul class="space-y-1 text-gray-700">
      {% for link in notebook.store_links %}
        <li>
          <a href="{{ link.link }}" target="_blank"
             class="text-blue-600 hover:underline font-medium">
            {{ link.store.store_name }} - {{ "{:,}".format(link.price) }}ì›
            {% if link.soldout %}<span class="text-red-500 ml-1">(í’ˆì ˆ)</span>{% endif %}
          </a>
        </li>
      {% else %}
        <li class="text-gray-400">íŒë§¤ ì •ë³´ ì—†ìŒ</li>
      {% endfor %}
    </ul>
  </section>

  <!-- ê°€ê²© ê·¸ë˜í”„ -->
  <section>
    <h4 class="text-lg font-semibold mb-2">ğŸ’¹ ê°€ê²© ì¶”ì´</h4>
    <div class="bg-gray-50 border rounded p-4">
      <canvas id="priceChart" class="w-full max-w-3xl h-64"></canvas>
    </div>
  </section>

  <!-- ì‚¬ìš©ì ë¦¬ë·° -->
  <section>
    <h4 class="text-lg font-semibold mb-2">ğŸ—£ ì‚¬ìš©ì ë¦¬ë·°</h4>
    <ul class="space-y-4">
      {% for rev in reviews %}
      <li class="bg-gray-50 border rounded-lg p-4">
        <div class="flex justify-between items-center mb-1">
          <span class="font-bold text-blue-700">{{ rev.consumer.name }}</span>
          <span class="text-yellow-500 font-medium">â­ {{ rev.rating }}/5</span>
        </div>
        <div class="text-gray-700">{{ rev.comment }}</div>
      </li>
      {% else %}
      <li class="text-gray-500">ë“±ë¡ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</li>
      {% endfor %}
    </ul>
  </section>

</div>

<!-- ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById("priceChart").getContext("2d");
  const priceChart = new Chart(ctx, {
    type: "line",
    data: {
      labels: [
        {% for record in price_history %}
          "{{ record.date.strftime('%Y-%m-%d') }}"{% if not loop.last %}, {% endif %}
        {% endfor %}
      ],
      datasets: [{
        label: "ê°€ê²© (ì›)",
        data: [
          {% for record in price_history %}
            {{ record.price }}{% if not loop.last %}, {% endif %}
          {% endfor %}
        ],
        borderColor: "rgb(75, 192, 192)",
        backgroundColor: "rgba(75, 192, 192, 0.1)",
        tension: 0.3,
        fill: true,
        pointRadius: 3
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: false
        }
      },
      plugins: {
        legend: {
          labels: {
            font: {
              size: 13
            }
          }
        }
      }
    }
  });
</script>

{% endblock %}
