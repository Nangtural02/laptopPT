{% extends "base.html" %}
{% block content %}
<h2 class="text-xl font-bold mb-6">ë…¸íŠ¸ë¶ ìƒì„¸ ì •ë³´</h2>

<div class="bg-white rounded-lg shadow-md p-6 space-y-4">
  <h3 class="text-lg font-semibold">{{ notebook.model_name or 'ëª¨ë¸ëª… ë¯¸ìƒ' }}</h3>

  <ul class="text-sm text-gray-800 space-y-2">
    <li><strong>CPU:</strong> {{ notebook.cpu_obj.cpu_model_name }} (ì‹±ê¸€: {{ notebook.cpu_obj.single_thread_benchmark }}ì , ë©€í‹°: {{ notebook.cpu_obj.multi_thread_benchmark }}ì )</li>
    <li><strong>GPU:</strong> {{ notebook.gpu_obj.gpu_model_name }} ({{ notebook.gpu_obj.graphics_benchmark }}ì )</li>

    <li><strong>RAM ì˜µì…˜:</strong>
      <ul class="ml-4 list-disc">
        {% for mem in notebook.memories %}
          <li>{{ mem.capacity }} GB / {{ mem.bandwidth }} MHz</li>
        {% endfor %}
      </ul>
    </li>

    <li><strong>ì €ì¥ì¥ì¹˜ ì˜µì…˜:</strong>
      <ul class="ml-4 list-disc">
        {% for sto in notebook.storages %}
          <li>{{ sto.capacity }} GB / {{ sto.type }}</li>
        {% endfor %}
      </ul>
    </li>

    <li><strong>ë””ìŠ¤í”Œë ˆì´:</strong>
      {{ notebook.display_obj.size_inch }}" /
      {{ notebook.display_obj.resolution }} /
      {{ notebook.display_obj.refresh_rate }}Hz
    </li>

    <li><strong>ë¬´ê²Œ:</strong> {{ notebook.weight }} kg</li>
    <li><strong>ë°°í„°ë¦¬ ìš©ëŸ‰:</strong> {{ notebook.battery }} Wh</li>
    <li><strong>ì†Œë¹„ ì „ë ¥:</strong> {{ notebook.power_consumption }} W</li>

    <li><strong>í¸ì˜ ê¸°ëŠ¥:</strong>
      <ul class="ml-4 list-disc">
        {% if notebook.convenience_obj.hdmi %}<li>HDMI</li>{% endif %}
        {% if notebook.convenience_obj.sd_port %}<li>SDì¹´ë“œ ìŠ¬ë¡¯</li>{% endif %}
        {% if notebook.convenience_obj.lan_port %}<li>LAN í¬íŠ¸</li>{% endif %}
        {% if notebook.convenience_obj.pd_charge %}<li>PD ì¶©ì „</li>{% endif %}
        {% if notebook.convenience_obj.thunderbolt %}<li>ì¬ë”ë³¼íŠ¸</li>{% endif %}
      </ul>
    </li>
  </ul>

  <hr class="my-6">

  <h4 class="font-semibold mb-2">í˜„ì¬ íŒë§¤ ì •ë³´</h4>
  <ul class="text-sm text-gray-700 space-y-1">
    {% for link in notebook.store_links %}
      <li>
        <a href="{{ link.link }}" class="text-blue-600 hover:underline" target="_blank">
          {{ link.store.store_name }} - {{ "{:,}".format(link.price) }}ì› {% if link.soldout %}(í’ˆì ˆ){% endif %}
        </a>
      </li>
    {% else %}
      <li class="text-gray-500">íŒë§¤ ì •ë³´ ì—†ìŒ</li>
    {% endfor %}
  </ul>
  <hr class="my-6">

<h4 class="font-semibold mb-2">ğŸ’¹ ê°€ê²© ì¶”ì´</h4>
<canvas id="priceChart" class="w-full max-w-xl h-64"></canvas>
<hr class="my-6">

<h4 class="font-semibold mb-2">ğŸ—£ ì‚¬ìš©ì ë¦¬ë·°</h4>
<ul class="space-y-3 text-sm">
  {% for rev in reviews %}
  <li class="border p-3 rounded bg-gray-50">
    <div class="font-semibold text-blue-700">{{ rev.consumer.name }}</div>
    <div class="text-yellow-600">â­ {{ rev.rating }}/5</div>
    <div>{{ rev.comment }}</div>
  </li>
  {% else %}
  <li class="text-gray-500">ë“±ë¡ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</li>
  {% endfor %}
</ul>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById("priceChart").getContext("2d");
  const priceChart = new Chart(ctx, {
    type: "line",
    data: {
      labels: [
        {% for record in price_history %}
          "{{ record.date.strftime('%Y-%m-%d') }}"{% if not loop.last %}, {% endif %}
        {% endfor %}
      ],
      datasets: [{
        label: "ê°€ê²© (ì›)",
        data: [
          {% for record in price_history %}
            {{ record.price }}{% if not loop.last %}, {% endif %}
          {% endfor %}
        ],
        borderColor: "rgb(75, 192, 192)",
        tension: 0.2,
        fill: false
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: false
        }
      }
    }
  });
</script>

</div>
{% endblock %}
